language: c
sudo: required
install:
  - sudo apt-get --force-yes install lua5.1
  - pip install --user cpp-coveralls
before_script:
  - git clone https://github.com/mkschreder/libutype.git libutype
  - pushd libutype && autoreconf -if && ./configure --prefix=/usr/ && make && sudo make install && popd
  - git clone https://github.com/mkschreder/libblobpack.git libblobpack
  - pushd libblobpack && autoreconf -if && ./configure --prefix=/usr/ && make && sudo make install && popd
script: autoreconf -if && ./configure --enable-code-coverage && make && make check
after_success:
  - coveralls
addons:
  apt:
    packages:
    - lcov
    - lua5.1
